def p(t,p=range):a,i=len(t),len(t[0]);r=[-1]+[a for a in p(a)if len({*t[a]})==1]+[a];r=[-1]+[i for i in p(i)if len({t[a][i]for a in p(a)})==1]+[i];d=[[t[a+1][i+1]for(i,r)in zip(r,r[1:])if i+1<r-1]for(a,i)in zip(r,r[1:])if a+1<i-1];return[a[::-1]for a in d]